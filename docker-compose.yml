version: "3.8"

services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    image: solidev-backend:latest
    container_name: solidev-backend
    env_file:
      - ./.env
    environment:
      - NODE_ENV=production
      - BIND=0.0.0.0
      - SSL_ENABLE=true
      # Si no est√° en .env, puedes forzar:
      # - HTTP_PORT=3002
    ports:
      - "${HTTP_PORT:-3002}"
    # Usamos secrets en lugar de bind mounts para certificados
    restart: always
    networks:
      - SoliDevNet

networks:
  SoliDevNet:
    driver: bridge
